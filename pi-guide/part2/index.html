
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../part1/">
      
      
        <link rel="next" href="../part3/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.7">
    
    
      
        <title>Part 2 - Ayaan's Blog</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.8608ea7d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#raspberry-pi-guide-part-23-usb-serial" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Ayaan&#39;s Blog" class="md-header__button md-logo" aria-label="Ayaan's Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Ayaan's Blog
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Part 2
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Ayaan&#39;s Blog" class="md-nav__button md-logo" aria-label="Ayaan's Blog" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Ayaan's Blog
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Pi Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Pi Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Part 2
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Part 2
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-disable-gui" class="md-nav__link">
    <span class="md-ellipsis">
      1) Disable GUI
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-optional-disable-wait-for-network-on-boot" class="md-nav__link">
    <span class="md-ellipsis">
      2) (optional) Disable wait for network on boot
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-enable-the-getty-communication-service-for-usb-serial" class="md-nav__link">
    <span class="md-ellipsis">
      3) Enable the getty communication service for USB serial:
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-shut-down-the-pi-and-edit-your-cmdlinetxt" class="md-nav__link">
    <span class="md-ellipsis">
      4) Shut down the Pi and edit your cmdline.txt:
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-edit-your-configtxt" class="md-nav__link">
    <span class="md-ellipsis">
      5) Edit your config.txt
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../part3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Part 3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../motors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Motors
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../useful_commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Useful Commands
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-disable-gui" class="md-nav__link">
    <span class="md-ellipsis">
      1) Disable GUI
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-optional-disable-wait-for-network-on-boot" class="md-nav__link">
    <span class="md-ellipsis">
      2) (optional) Disable wait for network on boot
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-enable-the-getty-communication-service-for-usb-serial" class="md-nav__link">
    <span class="md-ellipsis">
      3) Enable the getty communication service for USB serial:
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-shut-down-the-pi-and-edit-your-cmdlinetxt" class="md-nav__link">
    <span class="md-ellipsis">
      4) Shut down the Pi and edit your cmdline.txt:
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-edit-your-configtxt" class="md-nav__link">
    <span class="md-ellipsis">
      5) Edit your config.txt
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="raspberry-pi-guide-part-23-usb-serial">Raspberry Pi Guide Part 2/3: USB Serial</h1>
<p>By Ayaan 2-24-25
Part 2/3</p>
<p>So you just got your Linux install. Now what?</p>
<p>The goal of this step is to enable USB Serial, allowing direct communication between your PC and your Pi Zero 2W. You can then SSH into your Pi locally without any dependencies on Wifi. </p>
<p><strong>USB Serial Mode</strong> allows you to connect your pi directly to your computer using the second (data) MicroUSB port. 
<strong>"Regular" Mode</strong> is the normal configuration where you can plug in a power source, keyboard, and HDMI and use your Pi as normal. 
One limitation of USB Serial Mode is that you cannot plug in a keyboard and your computer at the same time since it uses the same physical port. You need either a USB to TTL adapter and use the pins or a USB OTG adapter. </p>
<p>This guide is tailored for enabling USB Serial mode as an option to have. This guide will let you switch between USB Serial mode and Regular Mode. It may not suit your usecase. </p>
<p>This was tested on Kali Linux, which is based on Debian. Since Raspbian is also based on Debian, it should also work there, but I have not tested it.  </p>
<h2 id="1-disable-gui">1) Disable GUI</h2>
<p>You can change this in <code>raspi-config</code></p>
<pre><code class="language-bash">sudo systemctl set-default multi-user.target
sudo reboot
</code></pre>
<p>To reenable GUI on boot, use raspi-config.</p>
<p>To start the GUI in the CLI, run: </p>
<pre><code class="language-bash">sudo startx &amp;
</code></pre>
<h2 id="2-optional-disable-wait-for-network-on-boot">2) (optional) Disable wait for network on boot</h2>
<pre><code class="language-bash">sudo systemctl disable systemd-networkd-wait-online.service
sudo reboot
</code></pre>
<h2 id="3-enable-the-getty-communication-service-for-usb-serial">3) Enable the getty communication service for USB serial:</h2>
<pre><code class="language-bash">sudo systemctl restart serial-getty@ttyGS0.service
</code></pre>
<p>check if it is running with: </p>
<pre><code class="language-bash">sudo systemctl status serial-getty@ttyGS0.service
</code></pre>
<p>It should say enabled in green. </p>
<h2 id="4-shut-down-the-pi-and-edit-your-cmdlinetxt">4) Shut down the Pi and edit your <code>cmdline.txt</code>:</h2>
<p>Change your <code>cmdline.txt</code> to this: </p>
<pre><code class="language-bash">console=serial0,115200 console=tty1 root=PARTUUID=fc6ea92b-02 rootfstype=ext4 fsck.repair=yes rootwait modules-load=dwc2,g_serial net.ifnames=0 ds=nocloud cfg80211.ieee80211_regdom=US
</code></pre>
<h2 id="5-edit-your-configtxt">5) Edit your <code>config.txt</code></h2>
<p>Add this to the top or bottom of your <code>config.txt</code> and ideally remove the rest of the settings that you don't need. Make sure what you already have in your <code>config.txt</code> does not conflict with this!</p>
<pre><code class="language-bash"># SETTINGS FOR USB SERIAL OR REGULAR MODE
# Please enable or disable the other to use a particular mode. 

# ENABLE FOR USB SERIAL
dtoverlay=dwc2
start_x=1

# ENABLE FOR REGULAR MODE
# dr_mode=peripheral

# Lower output resolution to 1/4th of 1080p
framebuffer_width=960
framebuffer_height=540

hdmi_force_hotplug=1
disable_overscan=1
</code></pre>
<h1 id="connecting-to-your-macbook">Connecting to your Macbook</h1>
<p>It is actually pretty straightforward on a Mac and a headache on Windows. </p>
<h2 id="1-plug-the-micro-usb-data-cable-to-the-second-micro-usb-port">1) Plug the Micro USB data cable to the second Micro USB port.</h2>
<p>Plug this into your Mac. Having a display is optional. </p>
<h2 id="2-run-the-following-command-on-your-computer-to-see-if-your-computer-recognizes-the-pi">2) Run the following command on your computer to see if your computer recognizes the Pi:</h2>
<pre><code class="language-bash">ls /dev/cu.usbmodem*
</code></pre>
<p>You should see something like this listed: </p>
<pre><code class="language-bash">(base) qayyuma@Ayaans-MacBook-Pro ~ % ls /dev/cu.usbmodem*              

/dev/cu.usbmodem11201
</code></pre>
<p>This Raspberry Pi is identified as <code>cu.usbmodem11201</code>. </p>
<h2 id="3-to-connect-to-your-pi-run-this-command">3) To connect to your Pi, run this command.</h2>
<p>Make sure to change the numbers to match yours.</p>
<pre><code class="language-bash">screen /dev/cu.usbmodem2101 115200
</code></pre>
<p>Now it should ask you to connect. Type in <code>kali</code>, then <code>kali</code> as username and password. </p>
<h3 id="now-you-are-connected-to-your-pi-via-usb-serial">Now you are connected to your Pi via USB Serial!</h3>
<p>A major limitation is that you cannot directly control the Pi because the one data port is taken up. You need a USB OTG hub for this to work. In order to undo this and be able to run in "normal" mode where you can plug in the power to the power port and plug in a keyboard like normal, you must change your <code>config.txt</code> to match this snippet: </p>
<p>USB Serial Mode: </p>
<pre><code class="language-bash">## SETTINGS FOR USB SERIAL OR REGULAR MODE
## Please enable or disable the other to use a particular mode. 

## ENABLE FOR USB SERIAL
dtoverlay=dwc2
start_x=1

## ENABLE FOR REGULAR MODE
## dr_mode=peripheral
</code></pre>
<p>Regular Mode: </p>
<pre><code class="language-bash">## SETTINGS FOR USB SERIAL OR REGULAR MODE
## Please enable or disable the other to use a particular mode. 

## ENABLE FOR USB SERIAL
## dtoverlay=dwc2
## start_x=1

## ENABLE FOR REGULAR MODE
dr_mode=peripheral
</code></pre>
<p>USB Serial has an identical experience to SSHing over a network. However, there is significantly less lag and you have a lot more free memory. </p>
<h2 id="and-youre-done">And you're done!</h2>
<p>Now you have a Raspberry Pi that you can SSH into locally!</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>